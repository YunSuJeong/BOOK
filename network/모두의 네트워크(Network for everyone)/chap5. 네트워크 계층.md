# 네트워크 계층 : 목적지에 데이터 전달하기

## LESSON17. 네트워크 계층의 역할
### 네트워크 계층의 역할
![네트워크환경](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2Feb5093bf-e8d2-45a5-999b-19ef168fdfe3%2FKakaoTalk_20220307_180909584.jpg)
- 네트워크 간의 통신을 가능하게 하는 것
- 다른 네트워크로 데이터를 전송하려면 **라우터** 필요
  
### 라우터 
- 데이터의 목적지가 정해지면 **해당 목적지까지 어떤 경로로 가는 것이 좋은지 알려주는 기능**
- 데이터를 보내려는 상대가 어디에 있는지 모르면 경로를 알려줄 수 없음
- **목적지 주소**가 있어야한다! = **IP주소**
- 데이터를 어떤 경로로 보낼지도 결정해야함 = **라우팅(routing)**
  - L3스위치도 라우팅 가능
    - 네트워크를 분할하여 라우팅을 할 수 있는 네트워크 장비
- **라우팅 테이블(routing table)** : 경로 정보를 등록하고 관리

### IP주소
![IP주소](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2F2e49a3f0-e9d8-4574-9d79-c98b6cb3e59d%2FKakaoTalk_20220307_180909584_01.jpg)
- 어떤 네트워크의 어떤 컴퓨터 인지 구분할 수 있도록 하는 주소

### IP란?
- Internet Protocol
- 네트워크 계청에서 캡슐화할 때, IP헤더를 붙인다
  ![IP헤더](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2Fb3b9cc97-5d5d-493f-8ade-c616b27e87ea%2FKakaoTalk_20220307_180909584_02.jpg)
  - 출발지IP주소, 목적지IP주소가 있다는 것을 기억하자
  - IP프로토콜을 사용하여 캡슐화 한 데이터를 **IP패킷**이라고 한다
  
## LESSON18. IP주소의 구조
### IP주소란?
- 인터넷 서비스 제공(ISP)에게 받을 수 있음
- 버전 : IPv4, IPv6
  - IPv4 : 32비트, 약 43억 개 
  - IPv6 : 128비트, 340간 개, **IP주소 부족문제 해결**을 위해 등장
- IPv4와 IPv6가 공존하여 사용되고 있음

### 공인IP주소&사설IP주소
  > 왜 두 종류나 필요할까? 사용할 수 있는 IPv4주소의 수가 고갈되고 있기 때문
- 공인IP주소
  - 인터넷에 직접 연결되는 컴퓨터나 라우터에 할당
- 사설IP주소
  - 회사나 가정의 랜에 있는 컴퓨터에 할당
  - 랜의 네트워크 관리자가 자유롭게 사설IP주소 할당 or **DHCP기능**을 사용하여 자동으로 주소 할당
    - DHCP(Dynamic Host Configuration Protocol) : IP주소를 자동으로 할당하는 프로토콜
![공인/사설ip주소](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2F26b228bd-06e6-4d7b-ada1-d1b4cfa5635b%2FKakaoTalk_20220307_180909584_03.jpg)
- 공인IP주소 한 개로 랜 안에 있는 컴퓨터 세대에 인터넷을 모두 연결할 수 있는 환경을 만들 수 있다.
- 공인IP주소 절약!

### IP주소 구성
  > 복습! MAC주소는 48비트로 구분하기 쉽도록 16진수로 표시

![10진수변환](https://velog.velcdn.com/images/sunnamgung8/post/50951c63-465a-49f2-8cbe-bdd58fea333d/image.png)
- 32비트 : **8비트 단위**로 나눠 표시, 범위도 정해져있음(0~255 = 0000000~11111111)
  - 옥텟(octet) : 데이터 8비트
- 10진수로 표시
- 실제로 IP주소는 2진수
- 네트워크ID와 호스트ID로 나누어져 있음
  - 네트워크ID : 어떤 네트워크인지 나타냄
  - 호스트ID : 해당 네트워크의 어느 컴퓨터인지 나타냄

## LESSON19. IP주소의 클래스 구조
### IP주소 클래스 정의
- 네트워크 크기를 구분하기위한 개념
- 네트워크ID를 크게 만들거나 호스트ID를 작게 만들어 네트워크 크기를 조정할 수 있음
### 클래스 종류
#### A클래스
![A클래스 범위](https://velog.velcdn.com/images/sunnamgung8/post/a04953ac-3161-45bc-b029-a3a35ce6e06e/image.png)
- 대규모 네트워크 주소
- 처음 8비트(네트워크ID) + 다음 24비트(호스트ID)
- 최대 호스트 수 : 1677만 7214개
#### B클래스
![B클래스 범위](https://velog.velcdn.com/images/sunnamgung8/post/5d56830c-6f9a-4611-b8d1-fddf1b0649b5/image.png)
- 중형 네트워크 주소
- 처음 24비트(네트워크ID) + 다음 16비트(호스트ID)
- 최대 호스트 수 : 6만 5534개
#### C클래스
![C클래스 범위](https://velog.velcdn.com/images/sunnamgung8/post/321e6232-1715-45db-a9a5-746065ae5951/image.png)
- 소규모 네트워크 주소
- 처음 16비트(네트워크ID) + 다음 8비트(호스트ID)
- 최대 호스트 수 : 254개
#### D클래스 
- 멀티캐스트(multicast) 주소
#### E클래스 
- 연구 및 특수용도 주소

### 공인IP/사설IP 주소 범위
#### 공인IP 주소 범위
- A클래스
  - 1.0.0.0~9.255.255.255
  - 11.0.0.0~126.255.255.255
- B클래스
  - 128.0.0.0~172.15.255.255
  - 172.32.0.0~191.255.255.255
- C클래스
  - 192.0.0.0~192.167.255.255
  - 192.169.0.0~223.255.255.255
#### 사설IP 주소 범위
- A클래스
  - 10.0.0.0~10.255.255.255
- B클래스
  - 172.16.0.0~173.31.255.255
- C클래스
  - 192.168.0.0~192.168.255.255

> 윈도우 기준 cmd창에 **ipconfig**명령어로 IP주소 확인가능
  
## LESSON20. 네트워크 주소와 브로드캐스트 주소의 구조
> 컴퓨터에 설정할 수 없는 주소!
> 자신의 IP주소로 설정하면 안된다!
### 네트워크 주소
![네트워크주소](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2F4cbc5b3d-be88-461c-938b-e81bcd67efb5%2FKakaoTalk_20220307_180909584_06.jpg)
- 호스트ID가 10진수로 0, 2진수로 00000000인 주소
- 전체 네트워크에서 작은 네트워크를 식별하는데 사용
- 전체 네트워크의 대표주소
### 브로드캐스트 주소
![브로드캐스트주소](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2F144a18a2-1b7e-419f-aa62-e0aa82a41d6a%2FKakaoTalk_20220307_180909584_07.jpg)
- 호스트ID가 10진수로 255, 2진수로 11111111인 주소
- 네트워크에 있는 컴퓨터나 장비 모두에게 한번에 데이터를 전송하는데 사용

## LESSON21. 서브넷의 구조
### 서브넷(subnet)
![서브넷팅](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2Fc8a7a9a5-39aa-4e57-9c4a-bff6a7fcfa0a%2FKakaoTalk_20220307_180909584_08.jpg)
- 서브넷팅된 네트워크
- **서브넷팅(subneting)** : 네트워크를 분할하는 것
  ![전](https://velog.velcdn.com/images/sunnamgung8/post/2b955e4a-74ea-4f38-9858-b56f6fb86103/image.png)
  ![후](https://velog.velcdn.com/images/sunnamgung8/post/32c53092-e6e0-4546-a8fa-8d3fc5d28017/image.png)
  - 호스트ID로 사용되던 비트를 빌려 서브넷ID로 만들어 서브넷을 만든다.

### 서브넷 마스크
- 서브넷팅된 IP주소의 네트워크ID/호스트ID를 식별하기 위한 값
#### 클래스 별 서브넷 마스크
- A클래스 : 255.0.0.0 = 11111111.00000000.00000000.00000000
- B클래스 : 255.255.0.0 = 11111111.11111111.00000000.00000000
- C클래스 : 255.255.255.0 = 11111111.11111111.11111111.00000000
#### 프리픽스(prefix) 표기법
- 서브넷 마스크를 슬래시(/비트 수)로 나타낸 것
- A클래스 : /8
- B클래스 : /16
- C클래스 : /24
- 예시. C클래스의 IP를 네트워크ID 24비트, 서브넷ID 4비트, 호스트ID 4비트로 서브넷팅했다. 이때 서브넷 마스크는?
  - 11111111.11111111.11111111.11110000
  - /28
  - 255.255.255.240(128+64+32+16)

## LESSON22. 라우터의 구조
### 라우터(router)
- 서로 다른 네트워크와 통신하려면 필요
- 네트워크 분리할 수 있다
- 스위치만 있는 네트워크는 모든 컴퓨터와 스위치가 동일한 네트워크에 속함
![라우터로 전송](https://velog.velcdn.com/images%2Fkimmainsain%2Fpost%2F8e7f6007-5ddc-4ca8-860b-f37df7f4b99f%2FKakaoTalk_20220307_180909584_11.jpg)
  - 컴퓨터 1은 다른 네트워크로 데이터 보낼 때, 어디로 전송해야 하는지 알지 못함
  - 일단 네트워크 출입구 = **기본 게이트웨이**로 전송
    - 게이트웨이는 네트워크 설정화면에서 수동 or 자동으로 설정 가능
### 라우팅
- 경로 정보를 기반으로 현재의 네트워크에서 다른 네트워크로 최적의 경로를 통해 데이터 전송
- 라우팅 테이블 : 경로 정보가 등록되어 있는 테이블
  - 수동 등록
    - 네트워크 관리자가 직접 등록/수정
    - 소규모 네트워크에 적합
  - 자동 등록
    - 대규모 네트워크에 적합(정보를 하나하나 등록하기 힘듬 + 수정 시 작업량 많아지기 때문)
    - 라우터 간에 경로 정보를 서로 교환하여 라우팅 테이블 정보를 자동으로 수정해줌
    - **라우팅 프로토콜**
      - 라우터 간에 라우팅 정보를 교환하기 위한 프로토콜
      - RIP, OSPF, BGP 등
